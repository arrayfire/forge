#-----------------------------------------------------------------------------
#
#  Configuration for continuous integration service at travis-ci.org
#
#-----------------------------------------------------------------------------

language: cpp

notifications:
    email: false

sudo: required

services:
    - docker

matrix:
    include:
        - os: linux
          env: CC_NAME=gcc-4.8 CXX_NAME=g++-4.8
        - os: linux
          env: CC_NAME=gcc-5 CXX_NAME=g++-5
        - os: linux
          env: CC_NAME=gcc CXX_NAME=g++ #default gnu compilers from ubuntu
        - os: linux
          env: CC_NAME=clang-3.9 CXX_NAME=clang++-3.9
        - os: linux
          env: CC_NAME=clang-4.0 CXX_NAME=clang++-4.0
        - os: linux
          env: CC_NAME=clang-5.0 CXX_NAME=clang++-5.0
        - os: linux
          env: CC_NAME=clang-6.0 CXX_NAME=clang++-6.0
        #- os: osx
        #  osx_image: xcode9.3

before_install:
    - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then docker run -d --name forge-pr -v $(pwd):/travis pradeepgarigipati/forge-ubuntu:bionic tail -f /dev/null; fi
    - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then docker ps; fi

install:
#  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install glfw glbinding fontconfig freeimage glm; fi
#  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew upgrade boost; fi
#  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew info cmake; fi

script:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then docker exec -t forge-pr bash -c "cd /travis;
    CC=/usr/bin/$CC_NAME CXX=/usr/bin/$CXX_NAME cmake -DCMAKE_BUILD_TYPE:STRING=RelWithDebInfo . &&
    make -j2 install"; fi
#  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then cmake . -DCMAKE_INSTALL_PREFIX:PATH=`pwd`/package && make install; fi
